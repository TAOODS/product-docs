# V0.44.0.0 Release Note

### 注意事项

1. **脚本组件删除方式变动**

新版本上因为新增了拖拽按钮，为了防止拖拽时将脚本误删，所以我们将删除脚本的方式改为使用右键菜单进行删除

![img](https://arkimg.ark.online/1743488149128-12.webp)

2. **044上对游戏效果就行了优化，同时也带来了少许的性能消耗**

SGSR 2.0，局内外骨骼统一，批刷局内骨骼为局外骨骼和拍照功能会使游戏内存有20~30M的升高，drawcall有20点的上升



### 新增功能

#### [新增]移动端拍照功能

为了满足玩家的社交分享需求，我们常常需要制作一些拍照截图的功能。此前大家往往需要自行搭建拍照、滤镜和截图功能，耗费大量开发资源。

在最新版本上，我们内置了「**拍照系统**」，只需调用接口即可启用拍摄界面，系统将自动处理截图保存、调整动作、滤镜及分享功能。

##### 开启拍照按钮

- 新增PhotoStudioService方法，可以开启/关闭MSG上的拍照功能按钮，开启后玩家可点击拍照按钮进入拍照功能

```TypeScript
 // 打开拍照系统
mw.PhotoStudioService.setEnablePhotoModule(true)
 
 // 关闭拍照系统
mw.PhotoStudioService.setEnablePhotoModule(false)
```

![img](https://arkimg.ark.online/1743488149111-1.webp)

同时我们还提供了直接打开拍照界面的API，便于大家自己制作进入拍照界面的逻辑

```TypeScript
 // 打开拍照系统
 mw.PhotoStudioService.asyncOpenPhotoStudioModule();
 
 // 关闭拍照系统
 mw.PhotoStudioService.asyncClosePhotoStudioModule();
```

![img](https://arkimg.ark.online/1743488149111-2.webp)

- 使用拍照功能不会影响玩家角色在游戏场景中的表现和相关的游戏逻辑，是一个自由度比较高的功能，玩家可在拍照功能中
  - 调整相机视角
  - 增加滤镜
  - 切换角色动作（只在拍照中生效）
  - 设置隐藏角色，特效挂件，其他玩家，NPC等（只在拍照中生效）
  - 照片存储，下载，分享

::: tip **注意：**

- 打开二级UI界面时尽量隐藏拍照功能
- 游戏核心玩法过程中隐藏拍照功能，玩家进入拍照时在游戏场景中玩家角色是处于待机状态的，无法进行操作。
- 角色头顶UI请使用character.overheadUI.否则会与拍照的头顶UI选项发生冲突

:::

#### [优化]属性面板UX优化

##### 组件自定义排序

当一个对象身上有许多组件，在之前的版本中组建的顺序是固定的，再调整参数的时候需要滚动面板寻找目标组件，尤其在频繁调整参数时，这类操作会显著降低编辑效率。

在本次更新后，属性面板将支持组件自定义排序，可将高频修改的组件拖拽置顶，减少每次寻找组件的冗余操作。

![img](https://arkimg.ark.online/1743488149111-3.gif)

当鼠标悬停在属性面板组件上时会显示拖拽按钮。可以通过拖拽该按钮调整控件的排序。

![img](https://arkimg.ark.online/1743488149111-4.webp)

同时可以使用右键菜单中的“上移”“下移”选项进行单次移动

![img](https://arkimg.ark.online/1743488149111-5.webp)

::: tip 注意

- 属性面板中“变换”组件不参与排序，位置始终会保持在最上方

:::

##### 组件复制粘贴

在旧版本中，若需要将某个组件的完整属性（如角色移动参数、脚本的大量自定义属性等）迁移到其他对象上，我们必须逐条手动复制粘贴数值，极大影响了批量编辑的效率。

本次更新新增组件属性复制粘贴功能，可以复制组件内的全部属性值并且允许粘贴到同类型的组件上

| ![img](https://arkimg.ark.online/1743488149111-6.webp) | ![img](https://arkimg.ark.online/1743488149112-7.webp) |
| ------------------------------------------------------ | ------------------------------------------------------ |
|                                                        |                                                        |

同时脚本组件可以直接粘贴为新脚本

![img](https://arkimg.ark.online/1743488149112-8.webp)

##### 删除逻辑修改

在新版本中，因为新增了拖拽按钮，为了防止拖拽时将脚本误删，所以我们将删除脚本的方式改为使用右键菜单进行删除

![img](https://arkimg.ark.online/1743488149112-9.webp)

#### [优化]MGS布局优化

在新的版本上，我们优化了左上角MGS悬浮窗图标，使其不会过于遮挡游戏内界面
![img](https://arkimg.ark.online/1743990109094-1.webp)

同时MGS悬浮窗新增了作者信息一栏，点开后可以看到游戏作者信息以及其他作品
![img](https://arkimg.ark.online/1743990128332-4.webp)
